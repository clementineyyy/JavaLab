<!--æœ¬æ–‡ä»¶çš„åŠŸèƒ½ï¼š
1.ä¸ªäººåŸºæœ¬ä¿¡æ¯å±•ç¤º
2.æˆç»©ã€è¯ä¹¦å’Œè€ƒå‹¤è®°å½•çš„é€‰é¡¹å¡å±•ç¤º
3.æ·»åŠ æˆç»©ã€æ·»åŠ è¯ä¹¦å’Œç¼–è¾‘å­¦ç”Ÿä¿¡æ¯çš„å¼¹çª—åŠŸèƒ½
4.å¯¹åº”çš„è¡¨å•éªŒè¯å’Œæ•°æ®æ“ä½œ-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ç”Ÿè¯¦æƒ… | å­¦ä¸šç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        .student-detail-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
        }

        .info-card {
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .student-basic-info {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .student-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: linear-gradient(45deg, #6a11cb, #2575fc);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 3rem;
            margin-bottom: 20px;
            position: relative;
        }

        .avatar-badge {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 36px;
            height: 36px;
            background: #4caf50;
            border-radius: 50%;
            border: 3px solid #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .avatar-badge::before {
            content: 'âœ“';
            color: white;
            font-weight: bold;
        }

        .info-item {
            display: flex;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px dashed #eee;
        }

        .info-label {
            width: 80px;
            color: #666;
            font-weight: 500;
        }

        .info-value {
            flex: 1;
            font-weight: 500;
        }

        .tab-navigation {
            display: flex;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }

        .detail-tab {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 500;
            position: relative;
        }

        .detail-tab.active {
            color: #2575fc;
        }

        .detail-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: #2575fc;
            border-radius: 3px 3px 0 0;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .grade-card {
            margin-bottom: 15px;
            background: #f9f9f9;
            border-radius: 6px;
            padding: 15px;
        }

        .grade-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .semester {
            font-weight: 600;
            color: #333;
        }

        .score-average {
            color: #2575fc;
            font-weight: 600;
        }

        .course-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
        }

        .course-item {
            background: white;
            padding: 10px;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .course-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .course-info {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 0.9rem;
        }

        .course-score {
            font-weight: 600;
        }

        .score-excellent {
            color: #4caf50;
        }

        .score-good {
            color: #2196f3;
        }

        .score-average {
            color: #ff9800;
        }

        .score-fail {
            color: #f44336;
        }

        .certificate-item {
            display: flex;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 15px;
            align-items: center;
        }

        .cert-icon {
            width: 60px;
            height: 60px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .cert-icon img {
            width: 40px;
            height: 40px;
        }

        .cert-info {
            flex: 1;
        }

        .cert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cert-meta {
            display: flex;
            color: #666;
            font-size: 0.9rem;
        }

        .cert-meta-item {
            margin-right: 15px;
            display: flex;
            align-items: center;
        }

        .cert-meta-item::before {
            content: '';
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #2575fc;
            margin-right: 5px;
        }

        .cert-actions {
            display: flex;
            gap: 10px;
        }

        .file-link {
            color: #2575fc;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .file-link::before {
            content: 'ğŸ“„';
            margin-right: 3px;
        }

        .empty-state {
            text-align: center;
            padding: 30px;
            color: #999;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .achievement-badge {
            display: inline-flex;
            align-items: center;
            background: #f0f7ff;
            color: #2575fc;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-right: 5px;
        }

        .achievement-badge::before {
            content: 'ğŸ†';
            margin-right: 3px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ä¾§è¾¹å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="system-logo small">
                    <div class="logo-animation small"></div>
                    <h2>å­¦ä¸šç®¡ç†ç³»ç»Ÿ</h2>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <span></span><span></span><span></span>
                </button>
            </div>

            <div class="user-info">
                <div class="avatar" id="userAvatar">
                    <span class="avatar-text" id="avatarText">ç®¡</span>
                </div>
                <div class="user-details">
                    <h3 id="userName">ç®¡ç†å‘˜</h3>
                    <span class="role-badge admin" id="userRole">ç³»ç»Ÿç®¡ç†å‘˜</span>
                </div>
            </div>

            <div class="nav-menu">
                <a href="dashboard.html" class="nav-item">
                    <span class="nav-icon dashboard-icon"></span>
                    <span class="nav-text">æ§åˆ¶é¢æ¿</span>
                </a>
                <a href="student-management.html" class="nav-item active">
                    <span class="nav-icon student-icon"></span>
                    <span class="nav-text">å­¦ç”Ÿç®¡ç†</span>
                </a>
                <a href="course-management.html" class="nav-item">
                    <span class="nav-icon course-icon"></span>
                    <span class="nav-text">è¯¾ç¨‹ç®¡ç†</span>
                </a>
                <a href="grade-management.html" class="nav-item">
                    <span class="nav-icon grade-icon"></span>
                    <span class="nav-text">æˆç»©ç®¡ç†</span>
                </a>
                <a href="certificate.html" class="nav-item">
                    <span class="nav-icon certificate-icon"></span>
                    <span class="nav-text">è¯ä¹¦ç®¡ç†</span>
                </a>
                <a href="analytics.html" class="nav-item">
                    <span class="nav-icon analytics-icon"></span>
                    <span class="nav-text">æˆç»©ç»Ÿè®¡</span>
                </a>
                <a href="#" class="nav-item" id="logoutBtn">
                    <span class="nav-icon logout-icon"></span>
                    <span class="nav-text">é€€å‡ºç™»å½•</span>
                </a>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <div class="content-header">
                <h1>å­¦ç”Ÿè¯¦æƒ…</h1>
                <div class="breadcrumb">
                    <a href="dashboard.html">é¦–é¡µ</a> /
                    <a href="student-management.html">å­¦ç”Ÿç®¡ç†</a> /
                    <span>å­¦ç”Ÿè¯¦æƒ…</span>
                </div>
            </div>

            <div class="content-body">
                <div class="action-bar">
                    <div class="back-button" onclick="history.back();">
                        <span class="back-icon"></span>
                        <span>è¿”å›åˆ—è¡¨</span>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-outline" id="editStudentBtn">ç¼–è¾‘ä¿¡æ¯</button>
                        <button class="btn btn-primary" id="addGradeBtn">æ·»åŠ æˆç»©</button>
                        <button class="btn btn-success" id="addCertificateBtn">æŸ¥çœ‹è¯ä¹¦</button>
                    </div>
                </div>

                <div class="student-detail-container">
                    <!-- å·¦ä¾§ä¸ªäººä¿¡æ¯ -->
                    <div class="info-card">
                        <div class="student-basic-info">
                            <div class="student-avatar">
                                <span id="studentInitial">å¼ </span>
                                <div class="avatar-badge"></div>
                            </div>
                            <h2 id="studentName">å¼ ä¸‰</h2>
                            <div class="student-status">
                                <span class="achievement-badge">æˆç»©ä¼˜å¼‚</span>
                                <span class="achievement-badge">ç­çº§å¹²éƒ¨</span>
                            </div>
                        </div>

                        <div class="student-info-list" style="margin-top: 20px;">
                            <div class="info-item">
                                <div class="info-label">å­¦å·</div>
                                <div class="info-value" id="studentIdDisplay">S001</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">å¹´çº§ä¸“ä¸š</div>
                                <div class="info-value" id="studentGradeMajor">å¤§äºŒ / è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">æ€§åˆ«</div>
                                <div class="info-value" id="studentGender">ç”·</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">å¹´é¾„</div>
                                <div class="info-value" id="studentAge">20</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">é‚®ç®±</div>
                                <div class="info-value" id="studentEmail">zhangsan@example.com</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">å…¥å­¦æ—¶é—´</div>
                                <div class="info-value" id="studentEnrollDate">2022-09-01</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">å­¦ç±çŠ¶æ€</div>
                                <div class="info-value"><span class="status-badge active">åœ¨è¯»</span></div>
                            </div>
                        </div>

                        <div class="student-statistics" style="margin-top: 20px;">
                            <h3>å­¦ä¸šæ¦‚å†µ</h3>
                            <div class="stat-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                                <div class="stat-card" style="background: #f0f7ff; padding: 10px; border-radius: 6px;">
                                    <div style="font-size: 0.9rem; color: #666;">å¹³å‡æˆç»©</div>
                                    <div style="font-size: 1.5rem; font-weight: 600; color: #2575fc;">89.5</div>
                                </div>
                                <div class="stat-card" style="background: #fff8e6; padding: 10px; border-radius: 6px;">
                                    <div style="font-size: 0.9rem; color: #666;">ä¿®è¯»å­¦åˆ†</div>
                                    <div style="font-size: 1.5rem; font-weight: 600; color: #ff9800;">68/120</div>
                                </div>
                                <div class="stat-card" style="background: #e8f5e9; padding: 10px; border-radius: 6px;">
                                    <div style="font-size: 0.9rem; color: #666;">è·å¾—è¯ä¹¦</div>
                                    <div style="font-size: 1.5rem; font-weight: 600; color: #4caf50;">3</div>
                                </div>
                                <div class="stat-card" style="background: #f3e5f5; padding: 10px; border-radius: 6px;">
                                    <div style="font-size: 0.9rem; color: #666;">æ’å</div>
                                    <div style="font-size: 1.5rem; font-weight: 600; color: #9c27b0;">12/45</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å³ä¾§é€‰é¡¹å¡å†…å®¹ -->
                    <div class="info-card">
                        <div class="tab-navigation">
                            <div class="detail-tab active" data-tab="grades">æˆç»©è®°å½•</div>
                            <div class="detail-tab" data-tab="certificates">è¯ä¹¦è®°å½•</div>
                            <div class="detail-tab" data-tab="attendance">è€ƒå‹¤è®°å½•</div>
                        </div>

                        <!-- æˆç»©è®°å½• -->
                        <div class="tab-content active" id="gradesTab">
                            <div class="grade-card">
                                <div class="grade-header">
                                    <div class="semester">2023-2024 ç¬¬ä¸€å­¦æœŸ</div>
                                    <div class="score-average">å­¦æœŸå‡åˆ†ï¼š91.2</div>
                                </div>
                                <div class="course-list">
                                    <div class="course-item">
                                        <div class="course-title">æ•°æ®ç»“æ„</div>
                                        <div class="course-info">
                                            <div class="course-credit">4å­¦åˆ† | å¿…ä¿®</div>
                                            <div class="course-score score-excellent">95</div>
                                        </div>
                                    </div>
                                    <div class="course-item">
                                        <div class="course-title">è®¡ç®—æœºç½‘ç»œ</div>
                                        <div class="course-info">
                                            <div class="course-credit">3å­¦åˆ† | å¿…ä¿®</div>
                                            <div class="course-score score-good">88</div>
                                        </div>
                                    </div>
                                    <div class="course-item">
                                        <div class="course-title">æ“ä½œç³»ç»Ÿ</div>
                                        <div class="course-info">
                                            <div class="course-credit">4å­¦åˆ† | å¿…ä¿®</div>
                                            <div class="course-score score-excellent">92</div>
                                        </div>
                                    </div>
                                    <div class="course-item">
                                        <div class="course-title">é«˜ç­‰æ•°å­¦(ä¸‹)</div>
                                        <div class="course-info">
                                            <div class="course-credit">5å­¦åˆ† | å¿…ä¿®</div>
                                            <div class="course-score score-excellent">90</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="grade-card">
                                <div class="grade-header">
                                    <div class="semester">2023-2024 ç¬¬äºŒå­¦æœŸ</div>
                                    <div class="score-average">å­¦æœŸå‡åˆ†ï¼š87.8</div>
                                </div>
                                <div class="course-list">
                                    <div class="course-item">
                                        <div class="course-title">äººå·¥æ™ºèƒ½å¯¼è®º</div>
                                        <div class="course-info">
                                            <div class="course-credit">3å­¦åˆ† | é€‰ä¿®</div>
                                            <div class="course-score score-excellent">93</div>
                                        </div>
                                    </div>
                                    <div class="course-item">
                                        <div class="course-title">ç¼–è¯‘åŸç†</div>
                                        <div class="course-info">
                                            <div class="course-credit">4å­¦åˆ† | å¿…ä¿®</div>
                                            <div class="course-score score-average">78</div>
                                        </div>
                                    </div>
                                    <div class="course-item">
                                        <div class="course-title">æ•°æ®åº“ç³»ç»Ÿ</div>
                                        <div class="course-info">
                                            <div class="course-credit">4å­¦åˆ† | å¿…ä¿®</div>
                                            <div class="course-score score-good">86</div>
                                        </div>
                                    </div>
                                    <div class="course-item">
                                        <div class="course-title">è½¯ä»¶å·¥ç¨‹</div>
                                        <div class="course-info">
                                            <div class="course-credit">3å­¦åˆ† | å¿…ä¿®</div>
                                            <div class="course-score score-excellent">94</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- è¯ä¹¦è®°å½• -->
                        <div class="tab-content" id="certificatesTab">
                            <div class="certificate-item">
                                <div class="cert-icon">
                                    <span style="font-size: 1.5rem;">ğŸ†</span>
                                </div>
                                <div class="cert-info">
                                    <div class="cert-title">è‹±è¯­å››çº§è¯ä¹¦</div>
                                    <div class="cert-meta">
                                        <div class="cert-meta-item">è¯ä¹¦ç¼–å·: CET4-2022-12345</div>
                                        <div class="cert-meta-item">è·å¾—æ—¶é—´: 2022-12-20</div>
                                    </div>
                                </div>
                                <div class="cert-actions">
                                    <span class="file-link">æŸ¥çœ‹è¯ä¹¦</span>
                                </div>
                            </div>

                            <div class="certificate-item">
                                <div class="cert-icon">
                                    <span style="font-size: 1.5rem;">ğŸ†</span>
                                </div>
                                <div class="cert-info">
                                    <div class="cert-title">è®¡ç®—æœºäºŒçº§è¯ä¹¦ (Python)</div>
                                    <div class="cert-meta">
                                        <div class="cert-meta-item">è¯ä¹¦ç¼–å·: NCRE2-2023-78901</div>
                                        <div class="cert-meta-item">è·å¾—æ—¶é—´: 2023-03-15</div>
                                    </div>
                                </div>
                                <div class="cert-actions">
                                    <span class="file-link">æŸ¥çœ‹è¯ä¹¦</span>
                                </div>
                            </div>

                            <div class="certificate-item">
                                <div class="cert-icon">
                                    <span style="font-size: 1.5rem;">ğŸ†</span>
                                </div>
                                <div class="cert-info">
                                    <div class="cert-title">è‹±è¯­å…­çº§è¯ä¹¦</div>
                                    <div class="cert-meta">
                                        <div class="cert-meta-item">è¯ä¹¦ç¼–å·: CET6-2023-56789</div>
                                        <div class="cert-meta-item">è·å¾—æ—¶é—´: 2023-06-25</div>
                                    </div>
                                </div>
                                <div class="cert-actions">
                                    <span class="file-link">æŸ¥çœ‹è¯ä¹¦</span>
                                </div>
                            </div>
                        </div>

                        <!-- è€ƒå‹¤è®°å½• -->
                        <div class="tab-content" id="attendanceTab">
                            <p class="empty-state">
                                <div class="empty-icon">ğŸ“Š</div>
                                ç›®å‰æ²¡æœ‰è€ƒå‹¤è®°å½•
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- æ·»åŠ æˆç»©å¼¹çª— -->
    <div class="modal" id="gradeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>æ·»åŠ æˆç»©è®°å½•</h2>
                <button class="modal-close" id="closeGradeModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="gradeForm">
                    <div class="form-group">
                        <label for="semester">å­¦æœŸ*</label>
                        <select id="semester" required>
                            <option value="">è¯·é€‰æ‹©å­¦æœŸ</option>
                            <option value="2022-2023-1">2022-2023 ç¬¬ä¸€å­¦æœŸ</option>
                            <option value="2022-2023-2">2022-2023 ç¬¬äºŒå­¦æœŸ</option>
                            <option value="2023-2024-1">2023-2024 ç¬¬ä¸€å­¦æœŸ</option>
                            <option value="2023-2024-2">2023-2024 ç¬¬äºŒå­¦æœŸ</option>
                        </select>
                        <span class="error-message" id="semester-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="course">è¯¾ç¨‹*</label>
                        <select id="course" required>
                            <option value="">è¯·é€‰æ‹©è¯¾ç¨‹</option>
                        </select>
                        <span class="error-message" id="course-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="score">æˆç»©*</label>
                        <input type="number" id="score" min="0" max="100" required>
                        <span class="error-message" id="score-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="examDate">è€ƒè¯•æ—¥æœŸ</label>
                        <input type="date" id="examDate">
                        <span class="error-message" id="examDate-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="comment">å¤‡æ³¨</label>
                        <textarea id="comment" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelGradeBtn">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="saveGradeBtn">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ è¯ä¹¦å¼¹çª— -->
    <div class="modal" id="certificateModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>æ·»åŠ è¯ä¹¦è®°å½•</h2>
                <button class="modal-close" id="closeCertModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="certificateForm">
                    <div class="form-group">
                        <label for="certName">è¯ä¹¦åç§°*</label>
                        <input type="text" id="certName" required>
                        <span class="error-message" id="certName-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="certNumber">è¯ä¹¦ç¼–å·*</label>
                        <input type="text" id="certNumber" required>
                        <span class="error-message" id="certNumber-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="certType">è¯ä¹¦ç±»å‹</label>
                        <select id="certType">
                            <option value="language">è¯­è¨€ç±»</option>
                            <option value="professional">ä¸“ä¸šç±»</option>
                            <option value="skill">æŠ€èƒ½ç±»</option>
                            <option value="other">å…¶ä»–</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="issueDate">é¢å‘æ—¥æœŸ*</label>
                        <input type="date" id="issueDate" required>
                        <span class="error-message" id="issueDate-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="certFile">è¯ä¹¦æ–‡ä»¶</label>
                        <input type="file" id="certFile" accept="image/*,.pdf">
                        <span class="error-message" id="certFile-error"></span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                    <button class="btn btn-outline" id="cancelCertBtn">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="saveCertBtn">ä¿å­˜</button>
                </div>
                        </div>
                    </div>

                    <!-- ç¼–è¾‘å­¦ç”Ÿä¿¡æ¯å¼¹çª— -->
                    <div class="modal" id="editStudentModal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>ç¼–è¾‘å­¦ç”Ÿä¿¡æ¯</h2>
                                <button class="modal-close" id="closeEditModal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <form id="editStudentForm">
                                    <div class="form-group">
                                        <label for="editName">å§“å*</label>
                                        <input type="text" id="editName" required>
                                        <span class="error-message" id="editName-error"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="editGender">æ€§åˆ«*</label>
                                        <select id="editGender" required>
                                            <option value="ç”·">ç”·</option>
                                            <option value="å¥³">å¥³</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="editAge">å¹´é¾„*</label>
                                        <input type="number" id="editAge" min="16" max="50" required>
                                        <span class="error-message" id="editAge-error"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="editMajor">ä¸“ä¸š*</label>
                                        <select id="editMajor" required>
                                            <option value="è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯">è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯</option>
                                            <option value="è½¯ä»¶å·¥ç¨‹">è½¯ä»¶å·¥ç¨‹</option>
                                            <option value="ä¿¡æ¯å®‰å…¨">ä¿¡æ¯å®‰å…¨</option>
                                            <option value="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½</option>
                                            <option value="æ•°æ®ç§‘å­¦">æ•°æ®ç§‘å­¦</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="editEmail">é‚®ç®±</label>
                                        <input type="email" id="editEmail">
                                        <span class="error-message" id="editEmail-error"></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="editStatus">å­¦ç±çŠ¶æ€</label>
                                        <select id="editStatus">
                                            <option value="åœ¨è¯»">åœ¨è¯»</option>
                                            <option value="ä¼‘å­¦">ä¼‘å­¦</option>
                                            <option value="é€€å­¦">é€€å­¦</option>
                                            <option value="æ¯•ä¸š">æ¯•ä¸š</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-outline" id="cancelEditBtn">å–æ¶ˆ</button>
                                <button class="btn btn-primary" id="saveEditBtn">ä¿å­˜</button>
                            </div>
                        </div>
                    </div>

                    <script src="js/common.js"></script>
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            // è·å–URLå‚æ•°
                            const urlParams = new URLSearchParams(window.location.search);
                            const studentId = urlParams.get('id') || 'S001'; // é»˜è®¤ID

                            // æ¨¡æ‹Ÿå­¦ç”Ÿæ•°æ®åŠ è½½
                            loadStudentData(studentId);

                            // é€‰é¡¹å¡åˆ‡æ¢
                            const tabs = document.querySelectorAll('.detail-tab');
                            tabs.forEach(tab => {
                                tab.addEventListener('click', function() {
                                    tabs.forEach(t => t.classList.remove('active'));
                                    this.classList.add('active');

                                    // æ˜¾ç¤ºå¯¹åº”å†…å®¹
                                    const tabId = this.getAttribute('data-tab');
                                    document.querySelectorAll('.tab-content').forEach(content => {
                                        content.classList.remove('active');
                                    });
                                    document.getElementById(tabId + 'Tab').classList.add('active');
                                });
                            });

                            // å¼¹çª—ç›¸å…³
                            const gradeModal = document.getElementById('gradeModal');
                            const certificateModal = document.getElementById('certificateModal');
                            const editStudentModal = document.getElementById('editStudentModal');

                            // æ·»åŠ æˆç»©æŒ‰é’®
                            document.getElementById('addGradeBtn').addEventListener('click', function() {
                                gradeModal.style.display = 'flex';
                                loadCourseOptions();
                            });

                            // å…³é—­æˆç»©å¼¹çª—
                            document.getElementById('closeGradeModal').addEventListener('click', function() {
                                gradeModal.style.display = 'none';
                            });

                            document.getElementById('cancelGradeBtn').addEventListener('click', function() {
                                gradeModal.style.display = 'none';
                            });

                            // æ·»åŠ è¯ä¹¦æŒ‰é’®
                            document.getElementById('addCertificateBtn').addEventListener('click', function() {
                                certificateModal.style.display = 'flex';
                            });

                            // å…³é—­è¯ä¹¦å¼¹çª—
                            document.getElementById('closeCertModal').addEventListener('click', function() {
                                certificateModal.style.display = 'none';
                            });

                            document.getElementById('cancelCertBtn').addEventListener('click', function() {
                                certificateModal.style.display = 'none';
                            });

                            // ç¼–è¾‘å­¦ç”Ÿä¿¡æ¯æŒ‰é’®
                            document.getElementById('editStudentBtn').addEventListener('click', function() {
                                // é¢„å¡«å……è¡¨å•
                                document.getElementById('editName').value = document.getElementById('studentName').innerText;
                                document.getElementById('editGender').value = document.getElementById('studentGender').innerText;
                                document.getElementById('editAge').value = document.getElementById('studentAge').innerText;
                                document.getElementById('editEmail').value = document.getElementById('studentEmail').innerText;

                                // ä»ä¸“ä¸šä¿¡æ¯ä¸­æå–ä¸“ä¸š
                                const gradeMajor = document.getElementById('studentGradeMajor').innerText;
                                const major = gradeMajor.split('/')[1].trim();
                                document.getElementById('editMajor').value = major;

                                editStudentModal.style.display = 'flex';
                            });

                            // å…³é—­ç¼–è¾‘å¼¹çª—
                            document.getElementById('closeEditModal').addEventListener('click', function() {
                                editStudentModal.style.display = 'none';
                            });

                            document.getElementById('cancelEditBtn').addEventListener('click', function() {
                                editStudentModal.style.display = 'none';
                            });

                            // ä¿å­˜å­¦ç”Ÿä¿¡æ¯
                            document.getElementById('saveEditBtn').addEventListener('click', function() {
                                if (validateEditForm()) {
                                    // æ¨¡æ‹Ÿä¿å­˜
                                    document.getElementById('studentName').innerText = document.getElementById('editName').value;
                                    document.getElementById('studentInitial').innerText = document.getElementById('editName').value.charAt(0);
                                    document.getElementById('studentGender').innerText = document.getElementById('editGender').value;
                                    document.getElementById('studentAge').innerText = document.getElementById('editAge').value;
                                    document.getElementById('studentEmail').innerText = document.getElementById('editEmail').value;

                                    // æ›´æ–°ä¸“ä¸šä¿¡æ¯
                                    const grade = document.getElementById('studentGradeMajor').innerText.split('/')[0].trim();
                                    const newMajor = document.getElementById('editMajor').value;
                                    document.getElementById('studentGradeMajor').innerText = `${grade} / ${newMajor}`;

                                    // å…³é—­å¼¹çª—
                                    editStudentModal.style.display = 'none';

                                    showToast('å­¦ç”Ÿä¿¡æ¯æ›´æ–°æˆåŠŸï¼', 'success');
                                }
                            });

                            // ä¿å­˜æˆç»©è®°å½•
                            document.getElementById('saveGradeBtn').addEventListener('click', function() {
                                if (validateGradeForm()) {
                                    // æ¨¡æ‹Ÿä¿å­˜æˆç»©
                                    const semester = document.getElementById('semester').value;
                                    const course = document.getElementById('course').value;
                                    const score = document.getElementById('score').value;

                                    // ç®€å•æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨è¯¥å­¦æœŸå¡ç‰‡
                                    let semesterCard = null;
                                    const semesterDisplay = getSemesterDisplay(semester);
                                    const existingCards = document.querySelectorAll('.grade-card');

                                    for (const card of existingCards) {
                                        if (card.querySelector('.semester').innerText === semesterDisplay) {
                                            semesterCard = card;
                                            break;
                                        }
                                    }

                                    // å¦‚æœå­¦æœŸå¡ç‰‡ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°çš„
                                    if (!semesterCard) {
                                        semesterCard = createSemesterCard(semesterDisplay);
                                        document.getElementById('gradesTab').appendChild(semesterCard);
                                    }

                                    // æ·»åŠ è¯¾ç¨‹åˆ°å­¦æœŸå¡ç‰‡
                                    const courseList = semesterCard.querySelector('.course-list');
                                    const courseItem = createCourseItem(course, score);
                                    courseList.appendChild(courseItem);

                                    // å…³é—­å¼¹çª—
                                    gradeModal.style.display = 'none';
                                    document.getElementById('gradeForm').reset();

                                    showToast('æˆç»©æ·»åŠ æˆåŠŸï¼', 'success');
                                }
                            });

                            // ä¿å­˜è¯ä¹¦è®°å½•
                            document.getElementById('saveCertBtn').addEventListener('click', function() {
                                if (validateCertForm()) {
                                    // æ¨¡æ‹Ÿä¿å­˜è¯ä¹¦
                                    const certName = document.getElementById('certName').value;
                                    const certNumber = document.getElementById('certNumber').value;
                                    const issueDate = document.getElementById('issueDate').value;

                                    // åˆ›å»ºè¯ä¹¦æ¡ç›®
                                    const certItem = createCertificateItem(certName, certNumber, issueDate);
                                    document.getElementById('certificatesTab').appendChild(certItem);

                                    // å…³é—­å¼¹çª—
                                    certificateModal.style.display = 'none';
                                    document.getElementById('certificateForm').reset();

                                    showToast('è¯ä¹¦æ·»åŠ æˆåŠŸï¼', 'success');
                                }
                            });


                            window.addEventListener('click', function(event) {
                                if (event.target === gradeModal) {
                                    gradeModal.style.display = 'none';
                                }
                                if (event.target === certificateModal) {
                                    certificateModal.style.display = 'none';
                                }
                                if (event.target === editStudentModal) {
                                    editStudentModal.style.display = 'none';
                                }
                            });

                            // ä¾§è¾¹æ åˆ‡æ¢
                            document.getElementById('sidebarToggle').addEventListener('click', function() {
                                document.querySelector('.sidebar').classList.toggle('collapsed');
                                document.querySelector('.main-content').classList.toggle('expanded');
                            });

                            // é€€å‡ºç™»å½•
                            document.getElementById('logoutBtn').addEventListener('click', function() {
                                if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                                    localStorage.removeItem('currentUser');
                                    window.location.href = 'index.html';
                                }
                            });
                        });

                        // åŠ è½½å­¦ç”Ÿæ•°æ®
                        function loadStudentData(studentId) {
                            const studentData = {
                                id: studentId,
                                name: 'å¼ ä¸‰',
                                gender: 'ç”·',
                                age: 20,
                                grade: 'å¤§äºŒ',
                                major: 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯',
                                email: 'zhangsan@example.com',
                                enrollDate: '2022-09-01',
                                status: 'åœ¨è¯»'
                            };

                            // å¡«å……é¡µé¢æ•°æ®
                            document.getElementById('studentName').innerText = studentData.name;
                            document.getElementById('studentInitial').innerText = studentData.name.charAt(0);
                            document.getElementById('studentIdDisplay').innerText = studentData.id;
                            document.getElementById('studentGradeMajor').innerText = `${studentData.grade} / ${studentData.major}`;
                            document.getElementById('studentGender').innerText = studentData.gender;
                            document.getElementById('studentAge').innerText = studentData.age;
                            document.getElementById('studentEmail').innerText = studentData.email;
                            document.getElementById('studentEnrollDate').innerText = studentData.enrollDate;
                        }

                        // åŠ è½½è¯¾ç¨‹é€‰é¡¹
                        function loadCourseOptions() {
                            const courseSelect = document.getElementById('course');
                            courseSelect.innerHTML = '<option value="">è¯·é€‰æ‹©è¯¾ç¨‹</option>';

                            // æ¨¡æ‹Ÿè¯¾ç¨‹æ•°æ®
                            const courses = [
                                'é«˜ç­‰æ•°å­¦', 'å¤§å­¦è‹±è¯­', 'ç¨‹åºè®¾è®¡åŸºç¡€', 'çº¿æ€§ä»£æ•°',
                                'æ•°æ®ç»“æ„', 'æ“ä½œç³»ç»Ÿ', 'è®¡ç®—æœºç½‘ç»œ', 'ç¼–è¯‘åŸç†',
                                'è½¯ä»¶å·¥ç¨‹', 'æ•°æ®åº“ç³»ç»Ÿ', 'äººå·¥æ™ºèƒ½å¯¼è®º', 'æœºå™¨å­¦ä¹ '
                            ];

                            courses.forEach(course => {
                                const option = document.createElement('option');
                                option.value = course;
                                option.innerText = course;
                                courseSelect.appendChild(option);
                            });
                        }

                        // éªŒè¯è¡¨å•
                        function validateEditForm() {
                            let valid = true;
                            const nameInput = document.getElementById('editName');
                            const ageInput = document.getElementById('editAge');
                            const emailInput = document.getElementById('editEmail');

                            // é‡ç½®é”™è¯¯æ¶ˆæ¯
                            document.getElementById('editName-error').textContent = '';
                            document.getElementById('editAge-error').textContent = '';
                            document.getElementById('editEmail-error').textContent = '';

                            // åå­—éªŒè¯
                            if (!nameInput.value.trim()) {
                                document.getElementById('editName-error').textContent = 'å§“åä¸èƒ½ä¸ºç©º';
                                valid = false;
                            }

                            // å¹´é¾„éªŒè¯
                            const age = parseInt(ageInput.value);
                            if (isNaN(age) || age < 16 || age > 50) {
                                document.getElementById('editAge-error').textContent = 'è¯·è¾“å…¥æœ‰æ•ˆå¹´é¾„(16-50)';
                                valid = false;
                            }

                            // é‚®ç®±éªŒè¯
                            if (emailInput.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                                document.getElementById('editEmail-error').textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€';
                                valid = false;
                            }

                            return valid;
                        }

                        function validateGradeForm() {
                            let valid = true;
                            const semesterSelect = document.getElementById('semester');
                            const courseSelect = document.getElementById('course');
                            const scoreInput = document.getElementById('score');

                            // é‡ç½®é”™è¯¯æ¶ˆæ¯
                            document.getElementById('semester-error').textContent = '';
                            document.getElementById('course-error').textContent = '';
                            document.getElementById('score-error').textContent = '';

                            if (!semesterSelect.value) {
                                document.getElementById('semester-error').textContent = 'è¯·é€‰æ‹©å­¦æœŸ';
                                valid = false;
                            }

                            if (!courseSelect.value) {
                                document.getElementById('course-error').textContent = 'è¯·é€‰æ‹©è¯¾ç¨‹';
                                valid = false;
                            }

                            const score = parseInt(scoreInput.value);
                            if (isNaN(score) || score < 0 || score > 100) {
                                document.getElementById('score-error').textContent = 'è¯·è¾“å…¥æœ‰æ•ˆæˆç»©(0-100)';
                                valid = false;
                            }

                            return valid;
                        }

                        function validateCertForm() {
                            let valid = true;
                            const certNameInput = document.getElementById('certName');
                            const certNumberInput = document.getElementById('certNumber');
                            const issueDateInput = document.getElementById('issueDate');

                            // é‡ç½®é”™è¯¯æ¶ˆæ¯
                            document.getElementById('certName-error').textContent = '';
                            document.getElementById('certNumber-error').textContent = '';
                            document.getElementById('issueDate-error').textContent = '';

                            if (!certNameInput.value.trim()) {
                                document.getElementById('certName-error').textContent = 'è¯ä¹¦åç§°ä¸èƒ½ä¸ºç©º';
                                valid = false;
                            }

                            if (!certNumberInput.value.trim()) {
                                document.getElementById('certNumber-error').textContent = 'è¯ä¹¦ç¼–å·ä¸èƒ½ä¸ºç©º';
                                valid = false;
                            }

                            if (!issueDateInput.value) {
                                document.getElementById('issueDate-error').textContent = 'è¯·é€‰æ‹©é¢å‘æ—¥æœŸ';
                                valid = false;
                            }

                            return valid;
                        }

                        // åˆ›å»ºå­¦æœŸå¡ç‰‡
                        function createSemesterCard(semesterText) {
                            const card = document.createElement('div');
                            card.className = 'grade-card';
                            card.innerHTML = `
                                <div class="grade-header">
                                    <div class="semester">${semesterText}</div>
                                    <div class="score-average">å­¦æœŸå‡åˆ†ï¼š-</div>
                                </div>
                                <div class="course-list"></div>
                            `;
                            return card;
                        }

                        // åˆ›å»ºè¯¾ç¨‹é¡¹
                        function createCourseItem(courseName, score) {
                            const courseItem = document.createElement('div');
                            courseItem.className = 'course-item';

                            // ç¡®å®šæˆç»©ç­‰çº§
                            let scoreClass = 'score-fail';
                            if (score >= 90) scoreClass = 'score-excellent';
                            else if (score >= 80) scoreClass = 'score-good';
                            else if (score >= 60) scoreClass = 'score-average';

                            courseItem.innerHTML = `
                                <div class="course-title">${courseName}</div>
                                <div class="course-info">
                                    <div class="course-credit">3å­¦åˆ† | å¿…ä¿®</div>
                                    <div class="course-score ${scoreClass}">${score}</div>
                                </div>
                            `;
                            return courseItem;
                        }

                        // åˆ›å»ºè¯ä¹¦é¡¹
                        function createCertificateItem(name, number, date) {
                            const certItem = document.createElement('div');
                            certItem.className = 'certificate-item';

                            const formattedDate = new Date(date).toISOString().split('T')[0];

                            certItem.innerHTML = `
                                <div class="cert-icon">
                                    <span style="font-size: 1.5rem;">ğŸ†</span>
                                </div>
                                <div class="cert-info">
                                    <div class="cert-title">${name}</div>
                                    <div class="cert-meta">
                                        <div class="cert-meta-item">è¯ä¹¦ç¼–å·: ${number}</div>
                                        <div class="cert-meta-item">è·å¾—æ—¶é—´: ${formattedDate}</div>
                                    </div>
                                </div>
                                <div class="cert-actions">
                                    <span class="file-link">æŸ¥çœ‹è¯ä¹¦</span>
                                </div>
                            `;
                            return certItem;
                        }

                        // è·å–å­¦æœŸæ˜¾ç¤ºæ–‡æœ¬
                        function getSemesterDisplay(semesterCode) {
                            const parts = semesterCode.split('-');
                            return `${parts[0]}-${parts[1]} ç¬¬${parts[2] === '1' ? 'ä¸€' : 'äºŒ'}å­¦æœŸ`;
                        }

                        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
                        function showToast(message, type = 'info') {
                            const toast = document.createElement('div');
                            toast.className = `toast toast-${type}`;
                            toast.innerText = message;
                            document.body.appendChild(toast);

                            setTimeout(() => {
                                toast.classList.add('show');
                            }, 10);

                            setTimeout(() => {
                                toast.classList.remove('show');
                                setTimeout(() => {
                                    document.body.removeChild(toast);
                                }, 300);
                            }, 3000);
                        }
                    </script>
                </body>
                </html>